function v(o){function r(){var n=document.createElement("div");n.setAttribute("style","position:relative;width:100%;height:100%;");var s=document.createElement("div"),c=320,f=c/screen.width,a=50-100*f/2;s.setAttribute("style","position:absolute;top:0px; left:"+(a-1)+"%;width:320px;border:0px;padding:15px;border-radius:5px;font-size:16px;color:#eeeeee;background-color:green;");var y=o;s.innerHTML=y,n.appendChild(s);var t=0;document.getElementById("bk").appendChild(n);function i(){n.setAttribute("style","position:relative;width:100%;filter:opacity("+.1*t+")"),t!=0&&(setTimeout(i,1.7**t),t--)}function b(){n.setAttribute("style","position:relative;width:100%;filter:opacity("+.1*t+")"),t!=10?(setTimeout(b,1.7**t),t++):setTimeout(i,1e3)}b()}r()}const h=document.querySelector("#cardnum"),x=document.querySelector("#cardexp"),S=document.querySelector("#cardcvc"),e=document.querySelector("button");document.querySelector(".status");const u={base:{iconColor:"#e39e9e",color:"#8e2222",fontFamily:"sans-serif","::placeholder":{color:"#757593"}},complete:{color:"green"}},m=stripe.elements(),p=m.create("cardNumber",{showIcon:!0,iconStyle:"solid",style:u});p.mount(h);const d=m.create("cardExpiry",{disabled:!0,style:u});d.mount(x);const l=m.create("cardCvc",{disabled:!0,style:u});l.mount(S);e.style.transition="1s background-color";e.disabled=!0;p.on("change",o=>{o.complete?(d.update({disabled:!1}),d.focus()):e.disabled=!0});d.on("change",o=>{o.complete?(l.update({disabled:!1}),l.focus()):e.disabled=!0});l.on("change",o=>{o.complete?e.disabled=!1:e.disabled=!0});var T=document.querySelector('meta[name="success-route"]').getAttribute("content");tolerance=0;var g=document.querySelector("#payment-form");g.addEventListener("submit",function(o){o.preventDefault(),stripe.confirmCardPayment(g.dataset.secret,{payment_method:{card:p}}).then(e.disabled=function(r){if(r.error){let c=function(){e.innerHTML="Pagar agora"};var s=c;e.disabled=!1,e.style.backgroundColor='"8e2221',e.innerHTML=r.error.message,tolerance++,tolerance<4?setTimeout(c,2e3):(e.disabled=!0,e.style.backgroundColor="#550000ff")}else if(r.paymentIntent.status==="succeeded"){var n=$('meta[name="onceSucceeded-route"]').attr("content");$.get(n,{client_id:document.querySelector("#payment-form").id.value},function(c,f,a){if(a.status===200){let t=function(i){window.location.href=T+i};var y=t;e.style.backgroundColor="green",e.innerHTML="Sucesso!",setTimeout(v,1e3,"<p style='font-size:10px;text-align:center'>Transação realizada!<br><b style='line-height:5px;'>Montante deduzido: </b>R$ "+r.paymentIntent.amount/100+" ,00</p>"),setTimeout(t,3e3,document.querySelector("#payment-form").id.value)}else console.error(a.responseText)})}})});
